package org.example.practicetask;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.ValueMarker;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.chart.ui.ApplicationFrame;
import org.jfree.chart.ui.RectangleAnchor;
import org.jfree.chart.ui.TextAnchor;
import org.jfree.chart.ui.UIUtils;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import javax.swing.*;
import java.awt.*;
import java.awt.geom.Ellipse2D;


public class PracticeTaskApplication extends JFrame {

    public PracticeTaskApplication(String title, double[] pressures, double[] times, double[] averagePressure) {
        super(title);

        // Создание набора данных для графика
        XYSeriesCollection dataset = new XYSeriesCollection();

        // Создание серии для давления
        XYSeries pressureSeries = new XYSeries("Давление");
        for (int i = 0; i < pressures.length; i++) {
            pressureSeries.add(times[i], pressures[i]);
        }
        dataset.addSeries(pressureSeries);

        // Вычисление среднего давления
        double averagePressures = calculateAverage(averagePressure);

        // Создание серии для средней линии
        XYSeries averageSeries = new XYSeries("Среднее давление");
        for (double time : times) {
            averageSeries.add(time, averagePressures);
        }
        dataset.addSeries(averageSeries);

        // Создание графика
        JFreeChart chart = ChartFactory.createXYLineChart(
                "График давления",  // Заголовок
                "Время",            // Ось X
                "Давление",        // Ось Y
                dataset             // Набор данных
        );

        // Настройка графика для отображения линий и точек
        XYPlot plot = chart.getXYPlot();
        XYItemRenderer renderer = plot.getRenderer();

        // Установка толщины линии для давления
        renderer.setSeriesStroke(0, new BasicStroke(2.0f));
        renderer.setSeriesShape(0, new Ellipse2D.Double(-3, -3, 6, 6));

        // Установка стиля для средней линии
        renderer.setSeriesStroke(1, new BasicStroke(2.0f, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
        renderer.setSeriesPaint(1, Color.BLUE); // Цвет средней линии

        // Добавление графика в панель
        ChartPanel chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new Dimension(800, 600));
        setContentPane(chartPanel);
    }

    private double calculateAverage(double[] pressures) {
        double sum = 0.0;
        for (double pressure : pressures) {
            sum += pressure;
        }
        return sum / pressures.length;
    }

    public static void main(String[] args) {

        double[] pressureValues = {
//                2.4891980882, 2.6731630005, 2.8865625867, 3.0962828388, 3.3133611592, 3.5414774824, 3.6665736467, 3.7107256577, 3.6592155783, 3.62610157,
//                3.6334602385, 3.6224222358, 3.6224222358, 3.640818907,
//                3.6334602385, 3.6334602385, 3.6481775756, 3.684970318, 3.7732737399, 3.8431804906, 3.9682766549,
//                2.4891980882, 2.6731630005, 2.8865625867, 3.0962828388, 3.3133611592,
//                3.5414774824, 3.6665736467, 3.7107256577, 3.6592155783, 3.62610157, 3.6334602385, 3.6224222358, 3.6224222358, 3.640818907,
//                3.6334602385, 3.6334602385, 3.6481775756, 3.684970318, 3.7732737399, 3.8431804906, 3.9682766549, 4.0933728193, 4.240544389, 4.3619612191, 4.4429059725, 4.4833780492,
//                4.5532847999, 4.5716814711, 4.5054540547, 4.5385674628, 4.6930983012, 4.8292324683, 4.9690459697, 5.0720655284,
                5.1382935449, 5.1898042244, 5.2192376982, 5.2817857804, 5.3038617859, 5.3075417203, 5.2192376982,
                5.1677282189, 5.1714069531, 5.1493309475, 5.1787656216, 5.1971616927, 5.1346136105, 5.0168761147, 4.9543286326, 4.9874420408,
                5.0426320546, 4.976404038, 4.8218737998, 4.7924391258, 4.9138559559, 4.9469699641, 4.9359319614,
                4.9175352901, 4.9690459697, 5.0389521202, 5.0463107887, 5.0242347832, 5.0499907231, 5.0831041312,
                5.0352733861, 5.0205560491, 5.0315934517, 4.9653666354, 4.8329118026, 4.7630050519, 4.7850810574,
                4.983762707,
                4.983762707,
                4.991121375,
                5.027914718,
                5.086782865,
                5.119897474,
                5.16036955,
                5.182445556,
                5.244993638,
                5.33329646,
                5.42895795,
                5.377448471,
                5.226596367,
                5.193482959,
                5.259709775,
                5.219237698,
                5.101500202,
                5.101500202,
                5.292824383,
                5.377448471,
                5.03203211,
                5.414240613,
                5.443675287,
                5.568771452,
                5.638678202,
                5.572450186,
                5.458392624,
                5.451033956,
                5.517260772,
                5.517260772,
                5.436316619,
                5.370089802,
                5.377448471,
                5.48046863,
                5.506223369,
                5.417920548,
                5.432637885,
                5.557734049,
                5.620282131,
                5.612923463,
                5.543016712,
                5.425279216,
                5.377448471,
                5.506223369,
                5.594526191,
                5.55037538,
                5.462071358,
                5.528299375,
                5.686508947,
                5.800567709,
                5.837359851,
                5.789529106,
                5.568771452,
                5.417920548,
                5.311220454,
                5.230276301,
                5.200841627,
                5.241313704,
                5.344333863,
                5.362731134,
                5.336975194,
                5.439996553,
                5.60188486,
                5.734339693,
                5.785850372,
                5.741698361,
                5.679150279,
                5.616602197,
                5.631319534,
                5.616602197,
                5.60188486,
                5.60188486,
                5.634998268,
                5.741698361,
                5.830001183,
                5.929342608,
                5.933022542,
                5.804246443,
                5.701226284,
                5.6276408,
                5.726981024,
                5.774811769,
                5.660754208,
                5.57613012,
                5.67179161,
                5.719622356,
                5.653395539,
                5.568771452
        };

        double[] pressures = {
                0.057181552, 0.0498228835, 0.0608608863, 0.071898889, 0.0535022178, 0.0608608863, 0.071898889, 0.071898889, 0.0498228835, 0.0608608863,
                0.057181552, 0.0535022178, 0.0535022178, 0.057181552, 0.0608608863, 0.071898889, 0.057181552, 0.0498228835, 0.0461441494, 0.0424648151,
                0.0461441494, 0.0535022178, 0.071898889, 0.0535022178, 0.0608608863, 0.0535022178, 0.071898889, 0.0608608863, 0.071898889, 0.0608608863,
                0.057181552, 0.0608608863, 0.071898889, 0.0498228835, 0.0461441494, 0.0608608863, 0.071898889, 0.0498228835, 0.0608608863, 0.0498228835,
                0.071898889, 0.071898889, 0.0608608863, 0.0535022178, 0.0498228835, 0.0535022178, 0.0461441494, 0.0498228835, 0.0608608863, 0.071898889,
                0.071898889, 0.0608608863, 0.057181552, 0.071898889, 0.0535022178, 0.0608608863, 0.071898889, 0.0608608863, 0.0608608863, 0.0608608863,
                0.071898889, 0.071898889, 0.0535022178, 0.0608608863, 0.0608608863, 0.071898889, 0.071898889, 0.0608608863, 0.0535022178, 0.0498228835,
                0.0608608863, 0.071898889, 0.071898889, 0.0608608863, 0.0535022178, 0.071898889, 0.071898889, 0.071898889, 0.071898889, 0.071898889,
                0.071898889, 0.071898889, 0.071898889, 0.071898889, 0.071898889, 0.071898889, 0.071898889,
                0.071898889, 0.071898889, 0.071898889, 0.071898889, 0.071898889, 0.071898889, 0.071898889,
                0.071898889, 0.071898889, 0.071898889, 0.071898889, 0.071898889, 0.071898889, 0.071898889,
                2.4891980882, 2.6731630005, 2.8865625867, 3.0962828388, 3.3133611592,
                3.5414774824, 3.6665736467, 3.7107256577, 3.6592155783, 3.62610157, 3.6334602385, 3.6224222358, 3.6224222358, 3.640818907,
                3.6334602385, 3.6334602385, 3.6481775756, 3.684970318, 3.7732737399, 3.8431804906, 3.9682766549, 4.0933728193, 4.240544389, 4.3619612191, 4.4429059725, 4.4833780492,
                4.5532847999, 4.5716814711, 4.5054540547, 4.5385674628, 4.6930983012, 4.8292324683, 4.9690459697, 5.0720655284,
                5.1382935449, 5.1898042244, 5.2192376982, 5.2817857804, 5.3038617859, 5.3075417203, 5.2192376982,
                5.1677282189, 5.1714069531, 5.1493309475, 5.1787656216, 5.1971616927, 5.1346136105, 5.0168761147, 4.9543286326, 4.9874420408,
                5.0426320546, 4.976404038, 4.8218737998, 4.7924391258, 4.9138559559, 4.9469699641, 4.9359319614,
                4.9175352901, 4.9690459697, 5.0389521202, 5.0463107887, 5.0242347832, 5.0499907231, 5.0831041312,
                5.0352733861, 5.0205560491, 5.0315934517, 4.9653666354, 4.8329118026, 4.7630050519, 4.7850810574,
                4.983762707,
                4.983762707,
                4.991121375,
                5.027914718,
                5.086782865,
                5.119897474,
                5.16036955,
                5.182445556,
                5.244993638,
                5.33329646,
                5.42895795,
                5.377448471,
                5.226596367,
                5.193482959,
                5.259709775,
                5.219237698,
                5.101500202,
                5.101500202,
                5.292824383,
                5.377448471,
                5.03203211,
                5.414240613,
                5.443675287,
                5.568771452,
                5.638678202,
                5.572450186,
                5.458392624,
                5.451033956,
                5.517260772,
                5.517260772,
                5.436316619,
                5.370089802,
                5.377448471,
                5.48046863,
                5.506223369,
                5.417920548,
                5.432637885,
                5.557734049,
                5.620282131,
                5.612923463,
                5.543016712,
                5.425279216,
                5.377448471,
                5.506223369,
                5.594526191,
                5.55037538,
                5.462071358,
                5.528299375,
                5.686508947,
                5.800567709,
                5.837359851,
                5.789529106,
                5.568771452,
                5.417920548,
                5.311220454,
                5.230276301,
                5.200841627,
                5.241313704,
                5.344333863,
                5.362731134,
                5.336975194,
                5.439996553,
                5.60188486,
                5.734339693,
                5.785850372,
                5.741698361,
                5.679150279,
                5.616602197,
                5.631319534,
                5.616602197,
                5.60188486,
                5.60188486,
                5.634998268,
                5.741698361,
                5.830001183,
                5.929342608,
                5.933022542,
                5.804246443,
                5.701226284,
                5.6276408,
                5.726981024,
                5.774811769,
                5.660754208,
                5.57613012,
                5.67179161,
                5.719622356,
                5.653395539,
                5.568771452
        };

        double[] times = {
                1.2088889235, 1.2100741087, 1.2112592939, 1.2124444791, 1.2136296643, 1.2148148495,
                1.2160000346, 1.2171852198, 1.218370405, 1.2195555902, 1.2207407754, 1.2219259606, 1.2231111458,
                1.2242963309, 1.2254815161, 1.2266667013, 1.2278518865, 1.2290370717, 1.2302222569, 1.2314074421,
                1.2325926272, 1.2337778124, 1.2349629976, 1.2361481828, 1.237333368, 1.2385185532,
                1.2397037383, 1.2408889235, 1.2420741087, 1.2432592939,
                1.2444444791, 1.2456296643, 1.2468148495, 1.2480000346, 1.2491852198, 1.250370405, 1.2515555902,
                1.2527407754, 1.2539259606, 1.2551111458, 1.2562963309, 1.2574815161, 1.2586667013, 1.2598518865, 1.2610370717,
                1.2622222569, 1.2634074421, 1.2645926272, 1.2657778124, 1.2669629976, 1.2681481828, 1.269333368,
                1.2705185532, 1.2717037383, 1.2728889235, 1.2740741087, 1.2752592939, 1.2764444791, 1.2776296643, 1.2788148495, 1.2800000346,
                1.2811852198, 1.282370405, 1.2835555902, 1.2847407754, 1.2859259606, 1.2871111458, 1.2882963309, 1.2894815161,
                1.2906667013, 1.2918518865, 1.2930370717, 1.2942222569, 1.2954074421,
                1.2965926272, 1.2977778124, 1.2989629976, 1.3001481828, 1.301333368, 1.3025185532, 1.3037037383, 1.3048889235,
                1.3060741087, 1.3072592939, 1.3084444791, 1.3096296643, 1.3108148495,
                1.3120000346, 1.3131852198, 1.314370405, 1.3155555902, 1.3167407754, 1.3179259606, 1.3191111458,
                1.3202963309, 1.3214815161, 1.3226667013, 1.3238518865, 1.3250370717, 1.3262222569, 1.3274074421,
                1.3285926272, 1.3297778124, 1.3309629976, 1.3321481828, 1.333333368, 1.3345185532, 1.3357037383,
                1.3368889235, 1.3380741087, 1.3392592939, 1.3404444791, 1.3416296643, 1.3428148495, 1.3440000346, 1.3451852198,
                1.346370405, 1.3475555902, 1.3487407754, 1.3499259606, 1.3511111458, 1.3522963309, 1.3534815161, 1.3546667013,
                1.3558518865, 1.3570370717, 1.3582222569, 1.3594074421, 1.3605926272, 1.3617778124,
                1.3629629976, 1.3641481828, 1.365333368, 1.3665185532, 1.3677037383, 1.3688889235,
                1.3700741087, 1.3712592939, 1.3724444791, 1.3736296643, 1.3748148495, 1.3760000346, 1.3771852198,
                1.378370405, 1.3795555902, 1.3807407754, 1.3819259606, 1.3831111458, 1.3842963309, 1.3854815161,
                1.3866667013, 1.3878518865, 1.3890370717, 1.3902222569, 1.3914074421, 1.3925926272,
                1.3937778124, 1.3949629976, 1.3961481828, 1.397333368, 1.3985185532, 1.3997037383, 1.4008889235,
                1.4020741087, 1.4032592939, 1.4044444791, 1.4056296643, 1.4068148495, 1.4080000346, 1.4091852198,
                1.410370405, 1.4115555902, 1.4127407754, 1.4139259606, 1.4151111458, 1.4162963309, 1.4174815161,
                1.4186667013, 1.4198518865, 1.4210370717, 1.4222222569, 1.4234074421, 1.4245926272, 1.4257778124,
                1.4269629976, 1.4281481828, 1.429333368, 1.4305185532, 1.4317037383, 1.4328889235, 1.4340741087,
                1.4352592939, 1.4364444791, 1.4376296643, 1.4388148495, 1.4400000346, 1.4411852198, 1.442370405, 1.4435555902, 1.4447407754, 1.4459259606,
                1.460148183, 1.461333368,
                1.462518553,
                1.463703738,
                1.464888924,
                1.466074109,
                1.467259294,
                1.468444479,
                1.469629664,
                1.470814849,
                1.472000035,
                1.47318522,
                1.474370405,
                1.47555559,
                1.476740775,
                1.477925961,
                1.479111146,
                1.480296331,
                1.481481516,
                1.482666701,
                1.483851886,
                1.485037072,
                1.486222257,
                1.487407442,
                1.488592627,
                1.489777812,
                1.490962998,
                1.492148183,
                1.493333368,
                1.494518553,
                1.495703738,
                1.496888924,
                1.498074109,
                1.499259294,
                1.500444479,
                1.501629664,
                1.502814849,
                1.504000035,
                1.50518522,
                1.506370405,
                1.50755559,
                1.508740775,
                1.509925961,
                1.511111146,
                1.512296331,
                1.513481516,
                1.514666701,
                1.515851886,
                1.517037072,
                1.518222257,
                1.519407442,
                1.520592627,
                1.521777812,
                1.522962998,
                1.524148183,
                1.525333368,
                1.526518553,
                1.527703738,
                1.528888924
        }; // Временные метки в секундах
        int countT = 0;
        int countP = 0;
        for(int i = 0; i < times.length; i++) {
            countT++;
        }
        System.out.println(countT);
        for(int j = 0; j < pressures.length; j++){
            countP++;
        }
        System.out.println(countP);

        PracticeTaskApplication app = new PracticeTaskApplication("График давления", pressures, times, pressureValues);
        app.pack();
        UIUtils.centerFrameOnScreen(app);
        app.setVisible(true);

    }

}

