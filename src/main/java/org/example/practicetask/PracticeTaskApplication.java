package org.example.practicetask;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.chart.ui.UIUtils;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import javax.swing.*;
import java.awt.*;
import java.awt.geom.Ellipse2D;
import java.util.ArrayList;
import java.util.List;


public class PracticeTaskApplication extends JFrame {

    public PracticeTaskApplication(String title, double[] pressures, double[] times, double[] average) {
        super(title);



        // Создание набора данных для графика
        XYSeriesCollection dataset = new XYSeriesCollection();

        // Создание серии для давления
        XYSeries pressureSeries = new XYSeries("Давление");
        for (int i = 0; i < pressures.length; i++) {
            pressureSeries.add(times[i], pressures[i]);
        }
        dataset.addSeries(pressureSeries);

        // Вычисление среднего давления
        double averagePressures = calculateAverage(average);
        System.out.println(averagePressures);

        // Создание серии для средней линии
        XYSeries averageSeries = new XYSeries("Среднее давление");
        for (double time : times) {
            averageSeries.add(time, averagePressures);
        }
        dataset.addSeries(averageSeries);

        // Создание графика
        JFreeChart chart = ChartFactory.createXYLineChart(
                "График давления",  // Заголовок
                "Время",            // Ось X
                "Давление",        // Ось Y
                dataset             // Набор данных
        );

        // Настройка графика для отображения линий и точек
        XYPlot plot = chart.getXYPlot();
        XYItemRenderer renderer = plot.getRenderer();

        // Установка толщины линии для давления
        renderer.setSeriesStroke(0, new BasicStroke(1.0f));
        renderer.setSeriesShape(0, new Ellipse2D.Double(-3, -3, 6, 6));

        // Установка стиля для средней линии
        renderer.setSeriesStroke(1, new BasicStroke(1.0f, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
        renderer.setSeriesPaint(1, Color.BLUE); // Цвет средней линии

        // Добавление графика в панель
        ChartPanel chartPanel = new ChartPanel(chart);

        chartPanel.setMouseWheelEnabled(true);

        chartPanel.setPreferredSize(new Dimension(1500, 1100));
        setContentPane(chartPanel);


    }
    private double calculateAverage(double[] pressures) {
        double sum = 0.0;
        for (double pressure : pressures) {
            sum += pressure;
        }
        return (sum / pressures.length);
    }

    public static List<Double> integrateAboveAverageWithThresholds(double[] pressures, double[] times, double averagePressure, double threshold) {
        List<Double> areas = new ArrayList<>();
        double totalArea = 0.0;

        // Пороги для колебаний
        double upperThreshold = averagePressure + threshold;
        double lowerThreshold = averagePressure - threshold;

        // Переменные для отслеживания начала и конца колебания
        boolean isAbove = false;
        int startIndex = -1;

        // Итерируем по давлению
        for (int i = 0; i < pressures.length; i++) {
            // Если давление выходит за порог
            if (pressures[i] > upperThreshold || pressures[i] < lowerThreshold) {
                // Начало нового колебания
                if (!isAbove) {
                    startIndex = i; // Начало колебания
                    isAbove = true;
                }
            } else {
                // Конец текущего колебания
                if (isAbove) {
                    isAbove = false;
                    // Интегрируем область колебания
                    double area = integrateInterval(pressures, times, averagePressure, startIndex, i - 1);
                    areas.add(area);
                    totalArea += area;
                }
            }
        }

        // Если колебание продолжается до конца
        if (isAbove) {
            double area = integrateInterval(pressures, times, averagePressure, startIndex, pressures.length - 1);
            areas.add(area);
            totalArea += area;
        }

        return areas;
    }

    private static double integrateInterval(double[] pressures, double[] times, double averagePressure, int startIndex, int endIndex) {
        double area = 0.0;

        // Интеграция с использованием метода трапеций
        for (int i = startIndex; i < endIndex; i++) {
            double deltaTime = times[i + 1] - times[i];
            double averagePressureBetweenPoints = (pressures[i] + pressures[i + 1]) / 2.0;
            area += averagePressureBetweenPoints * deltaTime;
        }

        return area;
    }

    public static List<int[]> findIntervalsAboveThreshold(double[] pressures, double threshold) {
        List<int[]> intervals = new ArrayList<>();
        boolean isAbove = false;
        int start = -1;

        for (int i = 0; i < pressures.length; i++) {
            if (pressures[i] > threshold && !isAbove) {
                start = i;
                isAbove = true;
            } else if (pressures[i] <= threshold && isAbove) {
                intervals.add(new int[]{start, i - 1});
                isAbove = false;
            }
        }

        // Если последний интервал был выше порога
        if (isAbove) {
            intervals.add(new int[]{start, pressures.length - 1});
        }

        return intervals;
    }


    public static void main(String[] args) {
        double [] average = {
                7.301721681, 7.202380257, 7.143510909, 7.125114837, 7.117756169, 7.139832174, 7.18766292, 7.1103975,
                7.055208087, 7.084642761, 7.191341654, 7.235493665, 7.202380257, 7.183984185, 7.224456262, 7.261248404,
                7.345872492, 7.323796487, 7.206058991, 7.198700322, 7.28332441, 7.228134996, 7.13615224, 7.139832174,
                7.250211002, 7.272287007, 7.180304251, 7.18766292, 7.202380257, 7.272287007, 7.375307166, 7.360589829,
                7.327476421, 7.279645676, 7.268607073, 7.312759084, 7.301721681, 7.209738925, 7.128793572, 7.139832174,
                7.13615224, 7.125114837, 7.088321495, 7.033132081, 7.073604158, 7.1103975, 7.150869577, 7.213417659,
                7.272287007, 7.312759084, 7.360589829, 7.360589829, 7.401061906, 7.43049658, 7.294363013, 7.268607073,
                7.275965741, 7.305400415, 7.231814931, 7.150869577, 7.235493665, 7.342193758, 7.268607073, 7.169266848,
                7.220776328, 7.235493665, 7.099360098, 7.022094679, 7.106718766, 7.180304251, 7.158228246, 7.092001429,
                7.121436103, 7.264928339, 7.353231161, 7.327476421, 7.275965741, 7.382665835, 7.482007259, 7.423137911,
                7.419459177, 7.375307166, 7.235493665, 7.114077435, 7.121436103, 7.312759084, 7.390024503, 7.25756967,
                7.434176514, 7.496724596, 7.496724596, 7.463609988, 7.529838004, 7.585027418, 7.607103424, 7.548234076,
                7.489365928, 7.489365928, 7.50040333, 7.570310081, 7.603423489, 7.485685993, 7.474648591, 7.511440733,
                7.493044662, 7.452572585, 7.437855248, 7.507761999, 7.522479336, 7.467289922, 7.459931254, 7.522479336,
                7.603423489, 7.599744755, 7.511440733, 7.470968656, 7.482007259, 7.426817846, 7.40474184, 7.467289922, 7.52615807,
                7.452572585, 7.467289922, 7.581347484, 7.548234076, 7.533516739, 7.559272678, 7.52615807, 7.548234076,
                7.636536897, 7.592386087, 7.559272678, 7.581347484, 7.607103424, 7.529838004, 7.445213917, 7.375307166,
                7.408420574, 7.478327325, 7.397383172, 7.301721681, 7.393703237, 7.507761999, 7.434176514, 7.375307166,
                7.445213917, 7.529838004, 7.489365928, 7.437855248, 7.489365928, 7.585027418, 7.585027418, 7.625499495, 7.614462092, 7.562951413,
                7.470968656, 7.485685993, 7.515120667, 7.470968656, 7.515120667, 7.562951413, 7.522479336, 7.474648591,
                7.459931254, 7.548234076, 7.67333024, 7.710123582, 7.688047577, 7.6475755, 7.599744755, 7.548234076, 7.636536897, 7.772671665,
                7.684368843, 7.489365928, 7.412100509, 7.323796487, 7.367948498, 7.390024503, 7.364269763, 7.228134996, 7.294363013, 7.401061906,
                7.342193758, 7.30908035, 7.470968656, 7.559272678, 7.489365928, 7.573988815, 7.607103424, 7.654934169, 7.732199588, 7.743236991, 7.677010174, 7.636536897, 7.629178229,
        };

        double[] pressures = {
                7.084642761, 7.13615224, 7.231814931, 7.202380257, 7.132473506, 7.154549511, 7.264928339, 7.253889736, 7.231814931, 7.206058991,
                7.202380257, 7.158228246, 7.066245489, 7.077284092, 7.047849418, 7.022094679, 7.025773413, 7.121436103, 7.154549511,
                7.077284092, 7.150869577, 7.206058991, 7.077284092, 6.974263933, 6.992660005, 7.033132081, 7.044170684,
                7.095680163, 7.069925424, 7.106718766, 7.128793572, 7.114077435, 7.128793572, 7.235493665, 7.268607073,
                7.253889736, 7.316437818, 7.434176514, 7.338513824, 7.206058991, 7.180304251, 7.239173599, 7.25756967, 7.077284092,
                6.977942668, 6.91907452, 6.915394585, 6.952187928, 6.992660005, 6.963225331, 6.896998514, 6.963225331,
                7.220776328, 7.287004344, 7.264928339, 7.371628432, 7.375307166, 7.331155155, 7.294363013, 7.367948498,
                7.327476421, 7.206058991, 7.217097594, 7.228134996, 7.158228246, 7.077284092, 7.099360098, 7.121436103,
                7.066245489, 6.981622602, 6.992660005, 6.985301336, 6.948507994, 7.000018673, 7.117756169, 7.080962826,
                7.1103975, 7.217097594, 7.290683078, 7.301721681, 7.382665835, 7.401061906, 7.386344569, 7.334835089,
                7.323796487, 7.375307166, 7.28332441, 7.183984185, 7.062566755, 7.077284092, 7.092001429, 7.103038832, 7.077284092,
                7.003697407, 6.977942668, 7.022094679, 7.018414744, 7.117756169, 7.180304251, 7.180304251, 7.220776328,
                7.342193758, 7.294363013, 7.213417659, 7.253889736, 7.331155155, 7.246532268, 7.103038832, 7.073604158,
                7.147190843, 7.169266848, 7.066245489, 7.058888021, 7.191341654, 7.147190843, 6.996339939, 6.966905265,
                7.029453347, 7.084642761, 7.022094679, 7.080962826, 7.183984185, 7.147190843, 7.080962826, 7.114077435,
                7.275965741, 7.290683078, 7.235493665, 7.253889736, 7.371628432, 7.375307166, 7.287004344, 7.264928339,
                7.338513824, 7.349552426, 7.228134996, 7.154549511, 7.217097594, 7.290683078, 7.224456262, 7.158228246,
                7.132473506, 7.095680163, 7.095680163, 7.077284092, 7.114077435, 7.106718766, 7.007377342, 6.996339939,
                7.117756169, 7.202380257, 7.165586914, 7.165586914, 7.198700322, 7.213417659, 7.125114837, 7.099360098,
                7.165586914, 7.183984185, 7.095680163, 7.025773413, 7.044170684, 7.125114837, 7.099360098, 6.992660005,
                7.011056076, 7.202380257, 7.264928339, 7.312759084, 7.331155155, 7.345872492, 7.294363013, 7.217097594,
                7.250211002, 7.345872492, 7.275965741, 7.106718766, 7.092001429, 7.132473506, 7.077284092, 6.977942668,
                6.933791857, 7.007377342, 7.154549511, 7.206058991, 7.073604158, 7.022094679, 7.114077435, 7.191341654,
                7.198700322, 7.231814931, 7.28332441, 7.206058991, 7.143510909, 7.305400415, 7.345872492, 7.213417659,
                7.147190843, 7.231814931, 7.301721681, 7.28332441, 7.305400415, 7.253889736, 7.132473506, 7.176625517,
                7.272287007, 7.213417659, 7.198700322, 7.213417659, 7.195021588, 7.165586914, 7.066245489, 7.033132081,
                7.092001429, 7.228134996, 7.217097594, 7.154549511,
                7.095680163, 7.106718766, 7.191341654, 7.224456262, 7.228134996, 7.242852333, 7.213417659, 7.213417659,
                7.202380257, 7.132473506, 7.044170684, 7.106718766, 7.224456262, 7.231814931, 7.154549511, 7.206058991,
                7.172945583, 7.033132081, 7.084642761, 7.165586914, 7.169266848, 7.128793572, 7.117756169, 7.169266848,
                7.18766292, 7.264928339, 7.235493665, 7.264928339, 7.298041747, 7.290683078, 7.327476421, 7.28332441,
                7.294363013, 7.268607073, 7.242852333, 7.195021588, 7.239173599, 7.290683078, 7.18766292, 7.139832174,
                7.198700322, 7.264928339, 7.176625517, 7.128793572, 7.239173599, 7.334835089, 7.334835089, 7.264928339,
                7.191341654, 7.139832174, 7.143510909, 7.172945583, 7.224456262, 7.176625517, 7.080962826, 7.022094679,
                7.069925424, 7.147190843, 7.195021588, 7.143510909, 7.165586914, 7.183984185, 7.106718766, 7.213417659,
                7.301721681, 7.290683078, 7.349552426, 7.290683078, 7.275965741, 7.367948498, 7.397383172, 7.290683078,
                7.242852333, 7.316437818, 7.349552426, 7.279645676, 7.235493665, 7.172945583, 7.106718766, 7.062566755,
                7.055208087, 7.154549511, 7.213417659, 7.1103975, 7.080962826, 7.198700322, 7.239173599, 7.195021588,
                7.106718766, 7.154549511, 7.143510909, 7.114077435, 7.143510909, 7.209738925, 7.25756967, 7.25756967,
                7.290683078, 7.353231161, 7.287004344, 7.268607073, 7.290683078, 7.338513824, 7.419459177, 7.386344569,
                7.301721681, 7.202380257, 7.143510909, 7.125114837, 7.117756169, 7.139832174, 7.18766292, 7.1103975,
                7.055208087, 7.084642761, 7.191341654, 7.235493665, 7.202380257, 7.183984185, 7.224456262, 7.261248404,
                7.345872492, 7.323796487, 7.206058991, 7.198700322, 7.28332441, 7.228134996, 7.13615224, 7.139832174,
                7.250211002, 7.272287007, 7.180304251, 7.18766292, 7.202380257, 7.272287007, 7.375307166, 7.360589829,
                7.327476421, 7.279645676, 7.268607073, 7.312759084, 7.301721681, 7.209738925, 7.128793572, 7.139832174,
                7.13615224, 7.125114837, 7.088321495, 7.033132081, 7.073604158, 7.1103975, 7.150869577, 7.213417659,
                7.272287007, 7.312759084, 7.360589829, 7.360589829, 7.401061906, 7.43049658, 7.294363013, 7.268607073,
                7.275965741, 7.305400415, 7.231814931, 7.150869577, 7.235493665, 7.342193758, 7.268607073, 7.169266848,
                7.220776328, 7.235493665, 7.099360098, 7.022094679, 7.106718766, 7.180304251, 7.158228246, 7.092001429,
                7.121436103, 7.264928339, 7.353231161, 7.327476421, 7.275965741, 7.382665835, 7.482007259, 7.423137911,
                7.419459177, 7.375307166, 7.235493665, 7.114077435, 7.121436103, 7.312759084, 7.390024503, 7.25756967,
                7.434176514, 7.496724596, 7.496724596, 7.463609988, 7.529838004, 7.585027418, 7.607103424, 7.548234076,
                7.489365928, 7.489365928, 7.50040333, 7.570310081, 7.603423489, 7.485685993, 7.474648591, 7.511440733,
                7.493044662, 7.452572585, 7.437855248, 7.507761999, 7.522479336, 7.467289922, 7.459931254, 7.522479336,
                7.603423489, 7.599744755, 7.511440733, 7.470968656, 7.482007259, 7.426817846, 7.40474184, 7.467289922, 7.52615807,
                7.452572585, 7.467289922, 7.581347484, 7.548234076, 7.533516739, 7.559272678, 7.52615807, 7.548234076,
                7.636536897, 7.592386087, 7.559272678, 7.581347484, 7.607103424, 7.529838004, 7.445213917, 7.375307166,
                7.408420574, 7.478327325, 7.397383172, 7.301721681, 7.393703237, 7.507761999, 7.434176514, 7.375307166,
                7.445213917, 7.529838004, 7.489365928, 7.437855248, 7.489365928, 7.585027418, 7.585027418, 7.625499495, 7.614462092, 7.562951413,
                7.470968656, 7.485685993, 7.515120667, 7.470968656, 7.515120667, 7.562951413, 7.522479336, 7.474648591,
                7.459931254, 7.548234076, 7.67333024, 7.710123582, 7.688047577, 7.6475755, 7.599744755, 7.548234076, 7.636536897, 7.772671665,
                7.684368843, 7.489365928, 7.412100509, 7.323796487, 7.367948498, 7.390024503, 7.364269763, 7.228134996, 7.294363013, 7.401061906,
                7.342193758, 7.30908035, 7.470968656, 7.559272678, 7.489365928, 7.573988815, 7.607103424, 7.654934169, 7.732199588, 7.743236991, 7.677010174, 7.636536897, 7.629178229,
                7.596064821, 7.57766875, 7.57766875, 7.669651506, 7.651254234, 7.504082065, 7.470968656, 7.437855248, 7.320117752, 7.239173599,
                7.316437818, 7.312759084, 7.298041747, 7.40474184, 7.555592744, 7.485685993, 7.375307166, 7.529838004, 7.585027418, 7.482007259,
                7.489365928, 7.67333024, 7.772671665, 7.69908498, 7.632858163, 7.636536897, 7.496724596, 7.401061906, 7.441533982, 7.426817846,
                7.463609988, 7.463609988, 7.434176514, 7.470968656, 7.448892651, 7.423137911, 7.496724596,
                7.452572585, 7.441533982, 7.452572585, 7.474648591, 7.515120667, 7.511440733, 7.52615807, 7.596064821, 7.607103424,
                7.544555341, 7.603423489, 7.710123582, 7.625499495, 7.533516739, 7.515120667, 7.43049658, 7.445213917, 7.482007259, 7.412100509,
                7.367948498, 7.452572585, 7.445213917, 7.375307166, 7.412100509, 7.496724596, 7.585027418, 7.511440733, 7.518799402,
                7.651254234, 7.669651506, 7.654934169, 7.640216832, 7.566630147, 7.511440733, 7.548234076, 7.548234076,
                7.55191401, 7.529838004, 7.504082065, 7.445213917, 7.401061906, 7.360589829, 7.448892651, 7.573988815,
                7.562951413, 7.511440733, 7.504082065, 7.489365928, 7.415779243, 7.419459177, 7.489365928, 7.478327325,
                7.423137911, 7.353231161, 7.415779243, 7.522479336, 7.518799402, 7.533516739, 7.706443648, 7.761633062, 7.735878322,
                7.710123582, 7.757954328, 7.772671665, 7.566630147, 7.448892651, 7.390024503, 7.364269763, 7.290683078, 7.239173599,
                7.25756967, 7.342193758, 7.386344569, 7.367948498, 7.356911095, 7.448892651, 7.548234076, 7.555592744, 7.596064821,
                7.706443648, 7.713802317, 7.665971571, 7.629178229, 7.669651506, 7.581347484, 7.459931254, 7.474648591, 7.419459177,
                7.331155155, 7.294363013, 7.316437818, 7.412100509, 7.448892651, 7.386344569,
                7.327476421, 7.40474184, 7.470968656, 7.474648591, 7.474648591, 7.533516739,7.544555341, 7.55191401, 7.625499495, 7.706443648, 7.721160985, 7.6475755, 7.566630147,
                7.702764914, 7.761633062, 7.610782158, 7.566630147, 7.393703237, 7.290683078, 7.305400415, 7.375307166,
                7.294363013, 7.202380257, 7.195021588, 7.25756967, 7.393703237, 7.504082065, 7.452572585, 7.43049658, 7.437855248, 7.559272678,
                7.529838004, 7.50040333, 7.599744755, 7.596064821, 7.423137911, 7.493044662, 7.713802317, 7.684368843,
                7.662292837, 7.665971571, 7.713802317, 7.677010174, 7.585027418, 7.581347484, 7.610782158, 7.599744755,
                7.540875407, 7.459931254, 7.452572585, 7.485685993, 7.43049658, 7.342193758, 7.294363013, 7.342193758,
                7.426817846, 7.342193758, 7.331155155, 7.515120667, 7.504082065, 7.478327325, 7.493044662,
                7.9161639, 7.94191864, 7.930881237, 7.886729226, 7.802106339, 7.776350399, 7.662292837, 7.522479336,
                7.474648591, 7.470968656, 7.441533982, 7.367948498, 7.279645676, 7.272287007, 7.217097594, 7.132473506,
                7.242852333, 7.323796487, 7.312759084, 7.386344569, 7.496724596, 7.596064821, 7.732199588, 7.853615818,
                7.960315911, 7.963994645, 8.000787988, 8.081732141, 8.122204218, 8.118525484, 8.08909081, 7.978711982,
                7.842578415, 7.824181144, 7.691726311, 7.610782158, 7.478327325, 7.40474184, 7.331155155, 7.220776328,
                7.132473506, 7.077284092, 7.04049075, 7.125114837, 7.213417659, 7.290683078, 7.331155155, 7.367948498, 7.397383172,
                7.412100509, 7.434176514, 7.573988815, 7.735878322, 7.802106339, 7.883050492, 8.008146656, 8.111166815, 8.247300382,
                8.313528399, 8.262017719, 8.162677495, 8.114846749, 8.022863993, 7.835219747, 7.69908498, 7.555592744,
                7.397383172, 7.224456262, 7.158228246, 7.029453347, 6.922753254, 6.882281177, 6.937470591, 7.080962826, 7.16190818,7.132473506, 7.180304251,
                7.268607073, 7.349552426, 7.533516739, 7.669651506, 7.713802317, 7.813143741, 7.949277308, 8.048618733,
                8.125884152, 8.136921555, 8.147960158, 8.06333607, 8.030222662, 7.982391917, 7.960315911, 7.9161639, 7.835219747, 7.680688908,
                7.518799402, 7.412100509, 7.272287007, 7.195021588, 7.132473506, 7.103038832, 7.114077435, 7.150869577, 7.180304251,
                7.202380257, 7.334835089, 7.360589829, 7.448892651, 7.515120667, 7.555592744, 7.621820761, 7.677010174, 7.791067736,
                7.838898481, 7.923522569, 8.01182539, 8.06333607, 8.092770744, 8.048618733, 7.963994645, 7.849937084, 7.860974486,
                7.680688908, 7.515120667, 7.459931254, 7.334835089, 7.224456262, 7.224456262, 7.220776328, 7.169266848, 7.202380257, 7.253889736,
                7.305400415, 7.419459177, 7.43049658, 7.496724596, 7.57766875, 7.596064821, 7.6475755, 7.739558256, 7.724840919,
                7.739558256, 7.757954328, 7.688047577, 7.69908498, 7.765312996, 7.684368843, 7.717482251, 7.82050241, 7.809465007, 7.857295752,
                7.827861078, 7.802106339, 7.772671665, 7.743236991, 7.658612903, 7.621820761, 7.599744755, 7.511440733, 7.459931254, 7.452572585,
                7.375307166, 7.323796487, 7.349552426, 7.360589829, 7.290683078, 7.268607073,7.371628432, 7.463609988, 7.55191401, 7.662292837,
                7.713802317, 7.791067736, 7.838898481, 7.934561171, 8.052298667, 7.978711982, 7.971353314, 8.078053407,
                8.055977401, 7.975033248, 7.956635977, 7.846257149, 7.695406245, 7.607103424, 7.441533982, 7.353231161, 7.28332441,
                7.198700322, 7.18766292, 7.051529353, 7.003697407, 7.069925424, 7.103038832, 7.147190843, 7.298041747, 7.426817846,
                7.463609988, 7.55191401, 7.721160985, 7.813143741, 7.934561171, 7.96767458, 7.978711982, 8.033901396,
                8.092770744, 8.070694738, 8.008146656, 7.94191864, 7.739558256, 7.636536897, 7.618140826, 7.518799402,
                7.345872492, 7.246532268, 7.169266848, 7.084642761, 7.080962826, 7.128793572, 7.165586914, 7.25756967,
                7.246532268, 7.25756967, 7.364269763, 7.474648591, 7.559272678, 7.599744755, 7.665971571, 7.691726311,
                7.710123582, 7.783709067, 7.805785073, 7.780030333, 7.930881237, 7.986070651, 7.945598574, 7.96767458,
                7.919843834, 7.9161639, 7.934561171, 7.82050241, 7.787389002, 7.688047577, 7.522479336, 7.415779243,
                7.360589829, 7.360589829, 7.356911095, 7.264928339, 7.202380257, 7.231814931, 7.253889736, 7.298041747,
                7.312759084, 7.393703237, 7.470968656, 7.529838004, 7.688047577, 7.743236991, 7.618140826, 7.566630147,
                7.669651506, 7.761633062, 7.849937084, 7.927202503, 7.956635977, 7.945598574, 8.01182539, 8.026542727,
                7.901446563, 7.872013089, 7.94191864, 7.875691823, 7.772671665, 7.732199588, 7.717482251, 7.573988815,
                7.386344569, 7.30908035, 7.301721681, 7.261248404, 7.183984185, 7.213417659, 7.275965741, 7.28332441,
                7.28332441, 7.338513824, 7.452572585, 7.566630147, 7.548234076, 7.537196673, 7.614462092, 7.592386087,
                7.706443648, 7.849937084, 7.680688908, 7.345872492, 6.941149325, 6.462840673, 5.951418613, 5.421599282
        };

        double[] times = {
                2.805333368, 2.806518553, 2.807703738, 2.808888924, 2.810074109, 2.811259294, 2.812444479, 2.813629664,
                2.814814849, 2.816000035, 2.81718522, 2.818370405, 2.81955559, 2.820740775, 2.821925961, 2.823111146,
                2.824296331, 2.825481516, 2.826666701, 2.827851886, 2.829037072, 2.830222257, 2.831407442, 2.832592627,
                2.833777812, 2.834962998, 2.836148183, 2.837333368, 2.838518553, 2.839703738, 2.840888924, 2.842074109,
                2.843259294, 2.844444479, 2.845629664, 2.846814849, 2.848000035, 2.84918522, 2.850370405, 2.85155559, 2.852740775, 2.853925961, 2.855111146,
                2.856296331, 2.857481516, 2.858666701, 2.859851886, 2.861037072, 2.862222257, 2.863407442, 2.864592627,
                2.865777812, 2.866962998, 2.868148183, 2.869333368, 2.870518553, 2.871703738, 2.872888924, 2.874074109, 2.875259294,
                2.876444479, 2.877629664, 2.878814849, 2.880000035, 2.88118522, 2.882370405, 2.88355559, 2.884740775, 2.885925961,
                2.887111146, 2.888296331, 2.889481516, 2.890666701, 2.891851886, 2.893037072, 2.894222257, 2.895407442, 2.896592627,
                2.897777812, 2.898962998, 2.900148183, 2.901333368, 2.902518553, 2.903703738, 2.904888924, 2.906074109, 2.907259294,
                2.908444479, 2.909629664, 2.910814849, 2.912000035, 2.91318522, 2.914370405, 2.91555559, 2.916740775, 2.917925961,
                2.919111146, 2.920296331, 2.921481516, 2.922666701, 2.923851886, 2.925037072, 2.926222257, 2.927407442, 2.928592627, 2.929777812, 2.930962998, 2.932148183, 2.933333368,
                2.934518553, 2.935703738, 2.936888924, 2.938074109, 2.939259294, 2.940444479, 2.941629664, 2.942814849,
                2.944000035, 2.94518522, 2.946370405, 2.94755559, 2.948740775, 2.949925961, 2.951111146, 2.952296331,
                2.953481516, 2.954666701, 2.955851886, 2.957037072, 2.958222257, 2.959407442, 2.960592627, 2.961777812,
                2.962962998, 2.964148183, 2.965333368, 2.966518553, 2.967703738, 2.968888924, 2.970074109, 2.971259294, 2.972444479,
                2.973629664, 2.974814849, 2.976000035, 2.97718522, 2.978370405, 2.97955559, 2.980740775, 2.981925961, 2.983111146,
                2.984296331, 2.985481516, 2.986666701, 2.987851886, 2.989037072, 2.990222257, 2.991407442, 2.992592627, 2.993777812, 2.994962998,
                2.996148183, 2.997333368, 2.998518553, 2.999703738, 3.000888924, 3.002074109, 3.003259294, 3.004444479, 3.005629664, 3.006814849, 3.008000035,
                3.00918522, 3.010370405, 3.01155559, 3.012740775, 3.013925961, 3.015111146, 3.016296331, 3.017481516, 3.018666701,
                3.019851886, 3.021037072, 3.022222257, 3.023407442, 3.024592627, 3.025777812, 3.026962998, 3.028148183, 3.029333368, 3.030518553,
                3.031703738, 3.032888924, 3.034074109, 3.035259294, 3.036444479, 3.037629664, 3.038814849, 3.040000035, 3.04118522, 3.042370405, 3.04355559,
                3.044740775, 3.045925961, 3.047111146, 3.048296331, 3.049481516, 3.050666701, 3.051851886, 3.053037072, 3.054222257,
                3.055407442, 3.056592627, 3.057777812, 3.058962998, 3.060148183, 3.061333368, 3.062518553, 3.063703738, 3.064888924, 3.066074109, 3.067259294,
                3.068444479, 3.069629664, 3.070814849, 3.072000035, 3.07318522, 3.074370405, 3.07555559, 3.076740775,
                3.077925961, 3.079111146, 3.080296331, 3.081481516, 3.082666701, 3.083851886, 3.085037072, 3.086222257, 3.087407442, 3.088592627, 3.089777812,
                3.090962998, 3.092148183, 3.093333368, 3.094518553, 3.095703738, 3.096888924, 3.098074109, 3.099259294, 3.100444479,
                3.101629664, 3.102814849, 3.104000035, 3.10518522, 3.106370405, 3.10755559, 3.108740775, 3.109925961, 3.111111146,
                3.112296331, 3.113481516, 3.114666701, 3.115851886, 3.117037072, 3.118222257, 3.119407442, 3.120592627,
                3.121777812, 3.122962998, 3.124148183, 3.125333368, 3.126518553, 3.127703738, 3.128888924, 3.130074109,
                3.131259294, 3.132444479, 3.133629664, 3.134814849, 3.136000035, 3.13718522, 3.138370405, 3.13955559,
                3.140740775, 3.141925961, 3.143111146, 3.144296331, 3.145481516, 3.146666701, 3.147851886, 3.149037072, 3.150222257, 3.151407442,
                3.152592627, 3.153777812, 3.154962998, 3.156148183, 3.157333368, 3.158518553, 3.159703738, 3.160888924,
                3.162074109, 3.163259294, 3.164444479, 3.165629664, 3.166814849, 3.168000035, 3.16918522, 3.170370405,
                3.17155559, 3.172740775, 3.173925961, 3.175111146, 3.176296331, 3.177481516, 3.178666701, 3.179851886,
                3.181037072, 3.182222257, 3.183407442, 3.184592627, 3.185777812, 3.186962998, 3.188148183, 3.189333368,
                3.190518553, 3.191703738, 3.192888924, 3.194074109, 3.195259294, 3.196444479, 3.197629664, 3.198814849,
                3.200000035, 3.20118522, 3.202370405, 3.20355559, 3.204740775, 3.205925961, 3.207111146, 3.208296331,
                3.209481516, 3.210666701, 3.211851886, 3.213037072, 3.214222257, 3.215407442, 3.216592627, 3.217777812,
                3.218962998, 3.220148183, 3.221333368, 3.222518553, 3.223703738, 3.224888924, 3.226074109, 3.227259294, 3.228444479,
                3.229629664, 3.230814849, 3.232000035, 3.23318522, 3.234370405, 3.23555559, 3.236740775, 3.237925961, 3.239111146,
                3.240296331, 3.241481516, 3.242666701, 3.243851886, 3.245037072, 3.246222257, 3.247407442, 3.248592627,
                3.249777812, 3.250962998, 3.252148183, 3.253333368, 3.254518553, 3.255703738, 3.256888924, 3.258074109, 3.259259294,
                3.260444479, 3.261629664, 3.262814849, 3.264000035, 3.26518522, 3.266370405, 3.26755559, 3.268740775, 3.269925961,
                3.271111146, 3.272296331, 3.273481516, 3.274666701, 3.275851886, 3.277037072, 3.278222257, 3.279407442,
                3.280592627, 3.281777812, 3.282962998, 3.284148183, 3.285333368, 3.286518553, 3.287703738, 3.288888924,
                3.290074109, 3.291259294, 3.292444479, 3.293629664, 3.294814849, 3.296000035, 3.29718522, 3.298370405, 3.29955559,
                3.300740775, 3.301925961, 3.303111146, 3.304296331, 3.305481516, 3.306666701, 3.307851886, 3.309037072,
                3.310222257, 3.311407442, 3.312592627, 3.313777812, 3.314962998, 3.316148183, 3.317333368, 3.318518553, 3.319703738,
                3.320888924, 3.322074109, 3.323259294, 3.324444479, 3.325629664, 3.326814849, 3.328000035, 3.32918522, 3.330370405,
                3.33155559, 3.332740775, 3.333925961, 3.335111146, 3.336296331, 3.337481516, 3.338666701, 3.339851886,
                3.341037072, 3.342222257, 3.343407442, 3.344592627, 3.345777812, 3.346962998, 3.348148183, 3.349333368,
                3.350518553, 3.351703738, 3.352888924, 3.354074109, 3.355259294, 3.356444479, 3.357629664,
                3.358814849, 3.360000035, 3.36118522, 3.362370405, 3.36355559, 3.364740775, 3.365925961, 3.367111146,
                3.368296331, 3.369481516, 3.370666701, 3.371851886, 3.373037072, 3.374222257, 3.375407442, 3.376592627,
                3.377777812, 3.378962998, 3.380148183, 3.381333368, 3.382518553, 3.383703738, 3.384888924, 3.386074109,
                3.387259294, 3.388444479, 3.389629664, 3.390814849, 3.392000035, 3.39318522, 3.394370405, 3.39555559,
                3.396740775, 3.397925961, 3.399111146, 3.400296331, 3.401481516, 3.402666701, 3.403851886, 3.405037072,
                3.406222257, 3.407407442, 3.408592627, 3.409777812, 3.410962998, 3.412148183, 3.413333368, 3.414518553, 3.415703738,
                3.416888924, 3.418074109, 3.419259294, 3.420444479, 3.421629664, 3.422814849, 3.424000035, 3.42518522,
                3.426370405, 3.42755559, 3.428740775, 3.429925961, 3.431111146, 3.432296331, 3.433481516, 3.434666701,
                3.435851886, 3.437037072, 3.438222257, 3.439407442, 3.440592627, 3.441777812, 3.442962998, 3.444148183,
                3.445333368, 3.446518553, 3.447703738, 3.448888924, 3.450074109, 3.451259294, 3.452444479, 3.453629664,
                3.454814849, 3.456000035, 3.45718522, 3.458370405, 3.45955559, 3.460740775, 3.461925961, 3.463111146,
                3.464296331, 3.465481516, 3.466666701, 3.467851886, 3.469037072, 3.470222257, 3.471407442, 3.472592627,
                3.473777812, 3.474962998, 3.476148183, 3.477333368, 3.478518553, 3.479703738, 3.480888924, 3.482074109, 3.483259294,
                3.484444479, 3.485629664, 3.486814849, 3.488000035, 3.48918522, 3.490370405, 3.49155559, 3.492740775,
                3.493925961, 3.495111146, 3.496296331, 3.497481516, 3.498666701, 3.499851886, 3.501037072, 3.502222257,
                3.503407442, 3.504592627, 3.505777812, 3.506962998, 3.508148183, 3.509333368, 3.510518553, 3.511703738,
                3.512888924, 3.514074109, 3.515259294, 3.516444479, 3.517629664, 3.518814849, 3.520000035, 3.52118522,
                3.522370405, 3.52355559, 3.524740775, 3.525925961, 3.527111146, 3.528296331, 3.529481516, 3.530666701,
                3.531851886, 3.533037072, 3.534222257, 3.535407442, 3.536592627, 3.537777812, 3.538962998, 3.540148183,
                3.541333368, 3.542518553, 3.543703738, 3.544888924, 3.546074109, 3.547259294, 3.548444479, 3.549629664,
                3.550814849, 3.552000035, 3.55318522, 3.554370405, 3.55555559, 3.556740775, 3.557925961, 3.559111146,
                3.560296331, 3.561481516, 3.562666701, 3.563851886, 3.565037072, 3.566222257, 3.567407442, 3.568592627,
                3.569777812, 3.570962998, 3.572148183, 3.573333368, 3.574518553, 3.575703738, 3.576888924, 3.578074109, 3.579259294,
                3.580444479, 3.581629664, 3.582814849, 3.584000035, 3.58518522, 3.586370405, 3.58755559, 3.588740775,
                3.589925961, 3.591111146, 3.592296331, 3.593481516, 3.594666701, 3.595851886, 3.597037072, 3.598222257,
                3.599407442, 3.600592627, 3.601777812, 3.602962998, 3.604148183, 3.605333368, 3.606518553, 3.607703738,
                3.608888924, 3.610074109, 3.611259294, 3.612444479, 3.613629664, 3.614814849, 3.616000035, 3.61718522,
                3.618370405, 3.61955559, 3.620740775, 3.621925961, 3.623111146, 3.624296331, 3.625481516, 3.626666701,
                3.627851886, 3.629037072, 3.630222257, 3.631407442, 3.632592627, 3.633777812, 3.634962998, 3.636148183,
                3.637333368, 3.638518553, 3.639703738, 3.640888924, 3.642074109, 3.643259294, 3.644444479, 3.645629664,
                3.646814849, 3.648000035, 3.64918522, 3.650370405, 3.65155559, 3.652740775, 3.653925961,
                3.655111146, 3.656296331, 3.657481516, 3.658666701, 3.659851886, 3.661037072, 3.662222257, 3.663407442,
                3.664592627, 3.665777812, 3.666962998, 3.668148183, 3.669333368, 3.670518553, 3.671703738, 3.672888924, 3.674074109,
                3.675259294, 3.676444479, 3.677629664, 3.678814849, 3.680000035, 3.68118522, 3.682370405, 3.68355559,
                3.684740775, 3.685925961, 3.687111146, 3.688296331, 3.689481516, 3.690666701, 3.691851886, 3.693037072,
                3.694222257, 3.695407442, 3.696592627, 3.697777812, 3.698962998, 3.700148183, 3.701333368, 3.702518553,
                3.703703738, 3.704888924, 3.706074109, 3.707259294, 3.708444479, 3.709629664, 3.710814849, 3.712000035,
                3.71318522, 3.714370405, 3.71555559, 3.716740775, 3.717925961, 3.719111146, 3.720296331, 3.721481516, 3.722666701,
                3.723851886, 3.725037072, 3.726222257, 3.727407442, 3.728592627, 3.729777812, 3.730962998, 3.732148183, 3.733333368, 3.734518553, 3.735703738,
                3.736888924, 3.738074109, 3.739259294, 3.740444479, 3.741629664, 3.742814849, 3.744000035, 3.74518522, 3.746370405, 3.74755559,
                3.748740775, 3.749925961, 3.751111146, 3.752296331, 3.753481516,
                3.754666701, 3.755851886, 3.757037072, 3.758222257, 3.759407442, 3.760592627, 3.761777812, 3.762962998,
                3.764148183, 3.765333368, 3.766518553, 3.767703738, 3.768888924, 3.770074109, 3.771259294, 3.772444479,
                3.773629664, 3.774814849, 3.776000035, 3.77718522, 3.778370405, 3.77955559, 3.780740775, 3.781925961, 3.783111146,
                3.784296331, 3.785481516, 3.786666701, 3.787851886, 3.789037072, 3.790222257, 3.791407442, 3.792592627,
                3.793777812, 3.794962998, 3.796148183, 3.797333368, 3.798518553, 3.799703738, 3.800888924, 3.802074109,
                3.803259294, 3.804444479, 3.805629664, 3.806814849, 3.808000035, 3.80918522, 3.810370405, 3.81155559,
                3.812740775, 3.813925961, 3.815111146, 3.816296331, 3.817481516, 3.818666701, 3.819851886, 3.821037072,
                3.822222257, 3.823407442, 3.824592627, 3.825777812, 3.826962998, 3.828148183, 3.829333368, 3.830518553, 3.831703738,
                3.832888924, 3.834074109, 3.835259294, 3.836444479, 3.837629664, 3.838814849, 3.840000035, 3.84118522,
                3.842370405, 3.84355559, 3.844740775, 3.845925961, 3.847111146, 3.848296331, 3.849481516, 3.850666701,
                3.851851886, 3.853037072, 3.854222257, 3.855407442, 3.856592627, 3.857777812, 3.858962998, 3.860148183,
                3.861333368, 3.862518553, 3.863703738, 3.864888924, 3.866074109, 3.867259294, 3.868444479, 3.869629664,
                3.870814849, 3.872000035, 3.87318522, 3.874370405, 3.87555559, 3.876740775, 3.877925961, 3.879111146,
                3.880296331, 3.881481516, 3.882666701, 3.883851886, 3.885037072, 3.886222257, 3.887407442, 3.888592627,
                3.889777812, 3.890962998, 3.892148183, 3.893333368, 3.894518553, 3.895703738, 3.896888924, 3.898074109,
                3.899259294, 3.900444479, 3.901629664, 3.902814849, 3.904000035, 3.90518522, 3.906370405, 3.90755559,
                3.908740775, 3.909925961, 3.911111146, 3.912296331, 3.913481516, 3.914666701, 3.915851886, 3.917037072,
                3.918222257, 3.919407442, 3.920592627, 3.921777812, 3.922962998, 3.924148183, 3.925333368, 3.926518553,
                3.927703738, 3.928888924, 3.930074109, 3.931259294, 3.932444479, 3.933629664, 3.934814849, 3.936000035,
                3.93718522, 3.938370405, 3.93955559, 3.940740775, 3.941925961, 3.943111146, 3.944296331, 3.945481516,
                3.946666701, 3.947851886, 3.949037072, 3.950222257, 3.951407442, 3.952592627, 3.953777812, 3.954962998,
                3.956148183, 3.957333368, 3.958518553, 3.959703738, 3.960888924, 3.962074109, 3.963259294, 3.964444479,
                3.965629664, 3.966814849, 3.968000035, 3.96918522, 3.970370405, 3.97155559, 3.972740775, 3.973925961,
                3.975111146, 3.976296331, 3.977481516, 3.978666701, 3.979851886, 3.981037072, 3.982222257, 3.983407442,
                3.984592627, 3.985777812, 3.986962998, 3.988148183, 3.989333368, 3.990518553, 3.991703738, 3.992888924,
                3.994074109, 3.995259294, 3.996444479, 3.997629664, 3.998814849, 4.000000035, 4.00118522, 4.002370405
        }; // Временные метки в секундах
        int countT = 0;
        int countP = 0;
        for (int i = 0; i < times.length; i++) {
            countT++;
        }
        System.out.println(countT);
        for (int j = 0; j < pressures.length; j++) {
            countP++;
        }
        System.out.println(countP);

        PracticeTaskApplication app = new PracticeTaskApplication("График давления", pressures, times,average);
        app.pack();
        UIUtils.centerFrameOnScreen(app);
        app.setVisible(true);

        List<Double> areas = integrateAboveAverageWithThresholds(pressures, times, 7.386795632198979,0.01);
        double totalArea = areas.stream().mapToDouble(Double::doubleValue).sum();

        System.out.println("Суммарная площадь выше средней линии: " + totalArea);
        System.out.println("Площади отдельных участков: " + areas);

        //участки выходящие за среднюю линию
        List<int []> total = findIntervalsAboveThreshold(pressures, 7.386795632198979);
        for (int[] interval : total) {
            System.out.print("Начало: " + interval[0] + ", Конец: " + interval[1]+ ";");
        }

    }
}